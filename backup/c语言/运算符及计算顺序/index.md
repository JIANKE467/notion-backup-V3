---
{
  "id": "3005a2dd-8276-8197-8217-c497ef85f8c3",
  "url": "https://www.notion.so/3005a2dd827681978217c497ef85f8c3",
  "created_time": "2026-02-07T09:52:00.000Z",
  "last_edited_time": "2026-02-07T09:52:00.000Z"
}
---

#  运算符及计算顺序

## 运算符及计算顺序
本页面详细介绍C语言中运算符的**优先级**、**结合性**（运算方向）以及**表达式的计算顺序**。
**核心概念：**
- **优先级**：决定哪个运算符先执行（如乘除优先于加减）
- **结合性**：当多个相同优先级的运算符出现时，决定从左到右还是从右到左计算
- **计算顺序**：包括运算符优先级、函数参数求值顺序、短路特性等
掌握这些规则可以避免编写出逻辑错误或难以理解的代码。
## 运算符运算方向
运算符的结合性（运算方向）决定了当多个相同优先级的运算符出现时，按什么顺序进行计算。
### 从左到右（L→R）
大多数运算符都是从左到右结合的：
- 算术运算符：`+` `-` `*` `/` `%`
- 关系运算符：`<` `>` `<=` `>=` `==` `!=`
- 逻辑运算符：`&&` `||`
- 位运算符：`&` `|` `^` `<<` `>>`
- 逗号运算符：`,`
- 成员访问：`.` `->`
**示例：**
```c
int result = 10 - 5 - 2;  // 从左到右：(10-5)-2 = 3
int x = a && b && c;      // 从左到右：(a&&b)&&c
```
### 从右到左（R→L）
少数运算符是从右到左结合的：
- 赋值运算符：`=` `+=` `-=` `*=` `/=` 等
- 单目运算符：`!` `~` `++` `--` `+`（正号） `-`（负号） `*`（取值） `&`（取地址）
- 三元运算符：`? :`
- `sizeof`、强制类型转换
**示例：**
```c
int a, b, c;
a = b = c = 10;  // 从右到左：a = (b = (c = 10))
int x = 5;
int y = ++x;     // 从右到左：先++x，再赋值给y
```
## 运算符优先级与结合性
优先级从高到低排列（1最高，15最低）：
| **优先级** | **运算符** | **说明** | **结合性** |
| --- | --- | --- | --- |
| 1 | () [] -> . | 括号、数组下标、结构体成员访问 | L → R |
| 2 | ! ~ ++ -- + - * & (type) sizeof | 单目运算符、取值、取地址、类型转换 | R → L |
| 3 |   • / % | 乘、除、取模 | L → R |
| 4 |   • - | 加、减 | L → R |
| 5 | << >> | 按位左移、右移 | L → R |
| 6 | < <= > >= | 关系运算符 | L → R |
| 7 | == != | 等于、不等于 | L → R |
| 8 | & | 按位与 | L → R |
| 9 | ^ | 按位异或 | L → R |
| 10 | | | 按位或 | L → R |
| 11 | && | 逻辑与 | L → R |
| 12 | || | 逻辑或 | L → R |
| 13 | ? : | 三元条件运算符 | R → L |
| 14 | = += -= *= /= %= &= ^= |= <<= >>= | 各种赋值运算符 | R → L |
| 15 | , | 逗号运算符 | L → R |
**说明**：
**同一优先级的运算符，运算次序由结合方向所决定。**
**简单记就是：括号＞！ > 算术运算符（加减乘除） > 关系运算符（两两比较） > &&（与） > ||（或） > 赋值运算符**
‍
**注意⚠️**
<u>**c语言中函数参数默认是从右向左计算的**</u>
如：
```c
int a=1
printf("%d %d",a,a++);
```
运行结果是：
```c
2 1
```
**先计算参数a++再计算参数a**
# 计算顺序汇总
### 1. 运算符优先级和结合性
c语言中表达式的运算顺序由优先级和结合性决定：
- **第一步**：先按运算符优先级运算（优先级高的先算）
- **第二步**：如果相邻若干个运算符优先级相同，则按结合方向来运算
**示例：**
```c
int result = 3 + 4 * 5;     // 先算4*5=20，再算3+20=23
int x = a = b = 10;         // 从右到左：b=10，然后a=b，最后x=a
int y = 10 - 5 - 2;         // 从左到右：(10-5)-2=3
```
### 2. 函数参数计算顺序
**c语言在大多数编译器中函数参数从右向左计算**（但不是绝对，因为C语言标准未定义函数参数的计算方向，这取决于所使用的编译器）
### 3. 逻辑运算的短路特性
- `&&`（逻辑与）：如果左边为假，右边不会被计算
- `||`（逻辑或）：如果左边为真，右边不会被计算
**示例：**
```c
if (a != 0 && b / a > 2) {  // 如果a==0，不会计算b/a，避免除零错误
    // ...
}
```
‍
# 常见错误与注意事项
### 1. 链式比较错误
**C语言不支持数学中的链式比较！**
**错误写法：**
```c
if (a < b < c) {  // 错误！这不是判断a<b且b<c
    // ...
}
```
**错误原因：**
`a < b < c` 会被解析为 `(a < b) < c`，先计算 `a < b` 得到 0 或 1，然后再与 c 比较，这不是你想要的逻辑！
**正确写法：**
```c
if ((a < b) && (b < c)) {  // 正确：用逻辑与连接两个条件
    // ...
}
```
### 2. 赋值与相等判断混淆
**注意区分 = 和 ==**
```c
// 错误示例
if (a = 10) {  // 这是赋值，不是判断！a被赋值为10，条件恒为真
    // ...
}

// 正确写法
if (a == 10) {  // 这才是判断a是否等于10
    // ...
}
```
### 3. 自增/自减的副作用
**避免在同一表达式中多次修改同一变量**
```c
int a = 5;
int b = a++ + a++;  // 不推荐！行为未定义或难以预测

// 建议分步写
int a = 5;
int b = a;
a++;
b += a;
a++;
```
### 4. 运算符优先级陷阱
**常见易错点：**
```c
// 位运算优先级低于关系运算
if (flags & MASK == 0)  // 错误！先算MASK==0，再做&运算
if ((flags & MASK) == 0)  // 正确：加括号明确优先级

// 逻辑与/或优先级低于关系运算
if (a > 0 && b > 0)  // 正确：>优先级高于&&
```
### 5. 除法和取模的注意事项
```c
int a = 5 / 2;      // 结果是2，不是2.5（整数除法）
float b = 5 / 2;    // 结果还是2.0（先算整数除法，再转float）
float c = 5.0 / 2;  // 结果是2.5（浮点数除法）
float d = (float)5 / 2;  // 结果是2.5（强制类型转换）

int mod = -5 % 3;   // 结果是-2（符号与被除数相同）
```
‍
