---
{
  "id": "28c5a2dd-8276-807c-95b9-ce1eeb1add60",
  "url": "https://www.notion.so/5-DQL-28c5a2dd8276807c95b9ce1eeb1add60",
  "created_time": "2025-10-14T09:13:00.000Z",
  "last_edited_time": "2025-11-08T08:20:00.000Z"
}
---

#  5.DQL数据查询语言

<u>***DQL数据查询语言，查询数据库中表的记录***</u>
# 基本查询（基本语法）
  查询语句以这个顺序书写：
  ```sql
SELECT 字段列表 
FROM 表名列表 
WHERE 条件列表 
GROUP BY 分组字段列表 
HAVING 分组后条件列表 
ORDER BY 排序字段列表 
LIMIT 分页参数
#这些可以写到一行上，分行是为了便于阅读
#这些不一定全有，没有的就不写
  ```
  PS：***是通配符：select * from table 就是查询表（table）中的所有字段**
  PS：**在字段列表后加 ****`as’别名’`**** 或 ****`‘别名’`****来添加别名（别名只会在本次查询起作用，不会上传到数据库）**
  PS：**在字段列表前加 ****`distinct`**** 表示去除重复**
# 条件查询
  条件列表有如下
  | 比较运算符 | 功能 |
  | --- | --- |
  | > | 大于 |
  | > = | 大于等于 |
  | < | 小于 |
  | < = | 小于等于 |
  | = | 等于（与C不同，只有一个=） |
  | <>或! = | 不等于 |
  | between…and… | 在某范围内（含最大，最小值） |
  | 字段 in(…) | 在in后的列表中的值，多选一（逗号分隔） |
  | like 占位符 | 模糊匹配（_匹配单个，%匹配任意个字符）
如：
张_：匹配所有张开头的二字人名
李%：匹配所有李开头的人名 |
  | 字段 is null | 为空（前面一定要跟字段，否则语法错误） |
  | 字段 is not null | 非空，同上 |

  | 逻辑运算符 | 功能 |
  | --- | --- |
  | and 或 && | 且 |
  | or 或 || | 或 |
  | not 或 ！ | 非，不是 |
# 聚合函数
  **聚合函数作用于列**
  ### 语法
  ```sql
select 聚合函数(字段列表) from 表名;
  ```
  ### 常见聚合函数
  | 函数 | 功能 |
  | --- | --- |
  | count | 统计数量（字段列表为*，统计整张表有几行） |
  | max | 最大值 |
  | min | 最小值 |
  | avg | 平均值 |
  | sum | 求和 |
# 分组查询
  ### 语法
  ```sql
select 字段列表 from 表名 [where 条件] group by 分组字段名 [having 分组后条件]；
  ```
  PS：where与having区别（这两个都是筛选）
  执行时机不同：
  where是分组前过滤，不满足where，不参与分组，having是分组后对结果过滤
  判断条件不同：
  **聚合函数在where后，having前执行**

  例1：根据性别分组，统计男员工和女员工数量
  ```sql
select count(*) from emp group by gender；
#emp：员工表表名
#gender：性别字段
  ```
  例2: 根据性别分组，分别统计男员工和女员工平均年龄
  ```sql
select avg(age) from emp group by gender;
#emp：员工表表名
#gender：性别字段
#age:年龄字段
  ```
  例3:查询年龄小于45的员工，根据工作地址分组，获取员工数量大于等于3的工作地址
  ```sql
select workaddress，count(*) from emp where age<45 group by workaddress having count (*)>=3;
#workdress工作地址字段
#emp表名
#age年龄字段
  ```
  ### 总结
  分组查询语法结构如下
  ```sql
select 字段1,字段2...from...group by 字段3；
  ```
  **字段1 与 字段2 都按照 字段3 中的种类分组，与字段3（一般使用聚合函数查询与分组有关的字段）**
  **查询与分组无关的字段，输出无意义的表格**
  如：按男女分类，统计各性别人数，时加入姓名查询。则姓名查询的输出无意义
# 排序查询
  语法
  ```sql
select 字段列表 from 表名 order by 字段1 排序方式,字段2 排序方;
  ```
  ### 排序方式（就两种）
  | 排序方式 | 作用 |
  | --- | --- |
  | asc | 升序（默认） |
  | desc | 降序 |
  注意⚠️：**SQL支持多字段排序，多字段排序按照写的先后顺序排序**
# 分页查询
  语法
  ```sql
select 字段列表 from 表名 limit 起始索引,查询记录数;
  ```
  注意⚠️：
  1. 起始索引从0开始，起始索引=（查询页码-1）x 每页记录数
  1. 分页查询各方言不同，mySQL关键字是limit
  1. 如果查询的是第一页数据，可省略起始索引，直接简写为：limit 查询记录数
  PS：
  起始索引就是偏移量
  查询记录数就是每页的记录数
# DQL执行顺序
  **之前讲的是编写顺序而非执行顺序**
  执行顺序：
  1. from 表名列表 
  1. where 条件列表
  1. group by 分组字段列表
  1. select 字段列表
  1. order by 排序字段列表
  1. limit 分页参数
